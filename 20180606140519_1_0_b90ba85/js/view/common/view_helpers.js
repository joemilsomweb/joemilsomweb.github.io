define(["underscore","handlebars"],function(e,t){t.registerHelper("showAwards",function(r){var i=t.Utils.escapeExpression(r).split(",");return new t.SafeString(e.reduce(i,function(e,t){return e+'<div class="'+t.toLowerCase()+'">'+t+"</div>"},""))}),t.registerHelper("image",function(r,i){e.isUndefined(i)&&(i=r);var s=e.map(i.hash,function(e,t){return t+'="'+e+'"'});return new t.SafeString('<img src="'+t.Utils.escapeExpression(e.isFunction(r)?r(this):r)+'" '+t.Utils.escapeExpression(s.join(" "))+" />")}),t.registerHelper("image_bg",function(r){return new t.SafeString("background-image:url('"+t.Utils.escapeExpression(e.isFunction(r)?r(this):r)+"');")}),t.registerHelper("array_index",function(e,t,r){return null==r&&(r=t,t=e,e=this),e[t]}),t.registerHelper("random",function(t,r){if(null==r&&(r=t,t=this),e.isArray(t)&&!e.isEmpty(t)){if(e.isFunction(r)){var i=r(t[Math.floor(Math.random()*t.length)]);return i}var s=t[Math.floor(Math.random()*t.length)];return s}return null}),t.registerHelper("shortNumber",function(e,t){var r=Number(e);return 1e3>r?r:1e6>r?Math.floor(r/1e3)+"k":Math.floor(r/1e6)+"m"}),t.registerHelper("likeBtn",function(e){var t='<div class="fb-like" data-send="false" data-layout="button_count" data-width="50" data-show-faces="false"></div>';return t}),t.registerHelper("sendBtn",function(e,t){var r=e.isEntry?"entry":"look",i=window.location.hostname+"/api.php/"+r+"/"+e.id,s='<div class="fb-send" data-href="'+i+'"></div>';return s}),t.registerHelper("commentBox",function(e,r){var i=e.isEntry?"entry":"look",s=window.location.hostname+"/api.php/"+i+"/"+e.id,n='<div class="fb-comments" data-href="'+t.Utils.escapeExpression(s)+'" data-num-posts="5" data-height="300" data-width="305"></div>';return new t.SafeString(n)}),t.registerHelper("tweetBtn",function(e,t){var r=(e.isEntry?"entry/":"look/")+e.id,i='<script src="//platform.twitter.com/widgets.js" type="text/javascript"></script><a href="https://twitter.com/share" data-url="'+r+'"  data-count="none" class="twitter-share-button">Tweet</a>';return i}),t.registerHelper("shortText",function(t,r){var i=20,s="shortText";return null==r&&(r=t,t=this),r.hash&&r.hash["class"]&&(s=r.hash["class"]),r.hash&&r.hash.length&&(i=r.hash.length),t.length<i?'<span class="'+e.escape(s)+'">'+e.escape(t)+"</span>":t}),t.registerHelper("modelYearShorten",function(e,t){return e.subStr(2)}),t.registerHelper("textSnip",function(t,r){var i={charLength:144,tail:"...",lastWord:!0};if(null==r&&(r=t,t=this),r.hash&&(i=e.extend(i,r.hash)),t.length>i.charLength){var s=i.charLength;return i.lastWord&&(s=t.indexOf(" ",i.charLength),1>s&&(s=t.length)),t.substr(0,s)+i.tail}return t}),t.registerHelper("match",function(e,t,r){return null==r&&(r=t,t=e,e=this),e===t?r.fn(this):r.inverse(this)}),t.registerHelper("youtube",function(r,i,s){var n={width:255,height:155};return null===s&&(s=i,i=this),s.hash&&(n=e.extend(n,s.hash)),new t.SafeString('<div id="youtube-'+e.uniqueId(t.Utils.escapeExpression(r))+'" class="video-holder" width="'+t.Utils.escapeExpression(n.width)+'" height="'+t.Utils.escapeExpression(n.height)+'" data-video-id="'+t.Utils.escapeExpression(i)+'"></div>')}),t.registerHelper("vimeo",function(e,r,i){e=t.Utils.escapeExpression(e),r=t.Utils.escapeExpression(r),i=t.Utils.escapeExpression(i);var s='<div class="videoBox"><iframe id="'+i+'_iframe" class="projectVideo" src="http://player.vimeo.com/video/'+e+"?api=1&player_id="+i+'_iframe&amp;title=0&amp;byline=0&amp;portrait=0&amp;badge=0&amp;color=ffffff" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe><img id="'+i+'_VidBG" class="projectVidBG" src="'+r+'"></img><div id="'+i+'_videoBtn" class="videoPlayBtn"></div></div>';return new t.SafeString(s)})});